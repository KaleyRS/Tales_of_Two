#define TOT_ITEM_STANDARD_EXCLUDE
    [not]
        id=Kaley,Nour,Venerion,Owen,Gok,Saurian4
    [/not]
    side=1,2
#enddef


# These are the compatible attacks for the type of weapon
#define TOT_ITEM_TYPE_SPEAR
    "spear","javelin","lance","pillum","pike","halberd","impale"
#enddef
#define TOT_ITEM_TYPE_HAMMER
    "hammer"
#enddef
#define TOT_ITEM_TYPE_BOW
    "bow","longbow","crossbow"
#enddef
#define TOT_ITEM_TYPE_SWORD
    "sword","longsword","saber","flamesword","greatsword","short sword","dagger"
#enddef
#define TOT_ITEM_TYPE_STAFF
    "staff"
#enddef

# This is to ensure you cannot stack weapons
#define TOT_ITEM_TYPE_SWORD_CHECK
    [not]
        [has_attack]
            formula="contains_string(description, 'elvish longsword' )"
        [/has_attack]
    [/not]
    [not]
        [has_attack]
            formula="contains_string(description, 'handcrafted shortsword' )"
        [/has_attack]
    [/not]
    [not]
        [has_attack]
            formula="contains_string(description, 'handcrafted longsword' )"
        [/has_attack]
    [/not]
#enddef

#define TOT_ITEM_TYPE_STAFF_CHECK
        [not]
            [has_attack]
                formula="contains_string(description, 'infernal battlestaff' )"
            [/has_attack]
        [/not]
        [not]
            [has_attack]
                formula="contains_string(description, 'blue staff' )"
            [/has_attack]
        [/not]
#enddef


    #####################
  ##     Weapons     ##
#####################

#define TOT_ITEM_ENCHANTED_ELVISH_BOOK X Y ID
    {PICKUPPABLE_ITEM {ID} {X} {Y} (
        race=human,elf
        {TOT_ITEM_STANDARD_EXCLUDE}
        [not]
            [has_attack]
                name="empowered faerie fire"
            [/has_attack]
        [/not]
    ) items/book4.png
    _"$unit.name finds a book that contains the powers to learn empowered faerie fire, a strong arcane based spell. Read it?"
    _"Read it"
    _"Leave it"
    _"$unit.name cannot use this item." (
        [object]
            name= _ "Enchanted Elvish Book"
            image=attacks/empowered_faerie_fire.png
            duration=forever
            description= _ "This book contains the powers to learn empowered faerie fire, a strong arcane based spell."
            [effect]
                apply_to=new_attack
                name="empowered faerie fire"
                description= _ "empowered faerie fire"
                icon=attacks/empowered_faerie_fire.png
                type=arcane
                range=ranged
                [specials]
                    {WEAPON_SPECIAL_MAGICAL}
                    {WEAPON_SPECIAL_FIRSTSTRIKE}
                [/specials]
                damage=29
                number=2
                start_time=-450
            [/effect]
            [effect]
                apply_to=new_animation
                id="empowered faerie fire"
                [attack_anim]
                    [filter_attack]
                        name="empowered faerie fire"
                    [/filter_attack]
                    {MISSILE_FRAME_FAERIE_FIRE}
                    {SOUND:HIT_AND_MISS magic-faeriefire.ogg magic-faeriefire-miss.ogg -450}
                [/attack_anim]
            [/effect]
        [/object]
    )}
#enddef

#define TOT_ITEM_OLD_WARSPEAR X Y ID
    {PICKUPPABLE_ITEM {ID} {X} {Y} (
        [has_attack]
            name={TOT_ITEM_TYPE_SPEAR}
        [/has_attack]
        [not]
            [has_attack]
                formula="contains_string(description, 'old warspear' )"
            [/has_attack]
        [/not]
        {TOT_ITEM_STANDARD_EXCLUDE}
    ) items/spear-blue.png
    _"$unit.name finds an Old Warspear made from enchanted metal. Equip it?"
    _"Equip it"
    _"Leave it"
    _"$unit.name cannot use this item." (
        [object]
            name= _ "Old Warspear"
            image=attacks/spear-blue.png
            duration=forever
            description= _ "$unit.name equips the Old Warspear."
            [effect]
                apply_to=attack
                name={TOT_ITEM_TYPE_SPEAR}
                set_description= _ "old warspear"
                set_icon=attacks/spear-blue.png
                set_type=pierce
                [specials]
                    mode=append
                    {WEAPON_SPECIAL_MARKSMAN}
                [/specials]
                increase_damage=30%
                increase_attacks=1
            [/effect]
        [/object]
    )}
#enddef

#define TOT_ITEM_CRYSTAL_LONGBOW X Y ID
    {PICKUPPABLE_ITEM {ID} {X} {Y} (
        [has_attack]
            name={TOT_ITEM_TYPE_BOW}
        [/has_attack]
        [not]
            [has_attack]
                formula="contains_string(description, 'crystal longbow' )"
            [/has_attack]
        [/not]
        [not]
            [has_attack]
                formula="contains_string(description, 'crystal shortbow' )"
            [/has_attack]
        [/not]
        {TOT_ITEM_STANDARD_EXCLUDE}
    ) items/crystal-longbow.png
    _"$unit.name finds a magical Crystal Longbow. Equip it?"
    _"Equip it"
    _"Leave it"
    _"$unit.name cannot use this item." (
        [object]
            name= _ "Crystal Longbow"
            image=attacks/crystal_bow.png
            duration=forever
            description= _ "$unit.name equips the Crystal Longbow."
            [effect]
                apply_to=attack
                name={TOT_ITEM_TYPE_BOW}
                set_description= _ "crystal longbow"
                set_icon=attacks/crystal_bow.png
                set_type=arcane
                [specials]
                    mode=append
                    {WEAPON_SPECIAL_MARKSMAN}
                [/specials]
                increase_damage=4
                increase_attacks=2
            [/effect]
        [/object]
    )}
#enddef

#define TOT_ITEM_CRYSTAL_SHORTBOW X Y ID
    {PICKUPPABLE_ITEM {ID} {X} {Y} (
        [has_attack]
            name={TOT_ITEM_TYPE_BOW}
        [/has_attack]
        [not]
            [has_attack]
                formula="contains_string(description, 'crystal longbow' )"
            [/has_attack]
        [/not]
        [not]
            [has_attack]
                formula="contains_string(description, 'crystal shortbow' )"
            [/has_attack]
        [/not]
        {TOT_ITEM_STANDARD_EXCLUDE}
    ) items/bow-crystal.png
    _"$unit.name finds a magical Crystal Shortbow. Equip it?"
    _"Equip it"
    _"Leave it"
    _"$unit.name cannot use this item." (
        [object]
            name= _ "Crystal Shortbow"
            image=attacks/bow-crystal.png
            duration=forever
            description= _ "$unit.name equips the Crystal Shortbow."
            [effect]
                apply_to=attack
                name={TOT_ITEM_TYPE_BOW}
                set_description= _ "crystal shortbow"
                set_icon=attacks/crystal_bow.png
                set_type=arcane
                [specials]
                    mode=append
                    {WEAPON_SPECIAL_MARKSMAN}
                [/specials]
                increase_damage=-20%
                increase_attacks=3
            [/effect]
        [/object]
    )}
#enddef

#define TOT_ITEM_ELVISH_LONGSWORD X Y ID
    {PICKUPPABLE_ITEM {ID} {X} {Y} (
        [has_attack]
            name={TOT_ITEM_TYPE_SWORD}
        [/has_attack]
        {TOT_ITEM_TYPE_SWORD_CHECK}
        {TOT_ITEM_STANDARD_EXCLUDE}
    ) items/elvish-longsword.png
    _"$unit.name finds a glowing Elvish Longsword. Equip it?"
    _"Equip it"
    _"Leave it"
    _"$unit.name cannot use this item." (
        [object]
            name= _ "Elvish Longsword"
            image=attacks/sword-elven-enchanted.png
            duration=forever
            description= _ "$unit.name equips the Elvish Longsword."
            [effect]
                apply_to=attack
                name={TOT_ITEM_TYPE_SWORD}
                set_description= _ "elvish longsword"
                set_icon=attacks/sword-elven-enchanted.png
                set_type=arcane
                [specials]
                    mode=append
                    {WEAPON_SPECIAL_MAGICAL}
                [/specials]
                increase_damage=4
                increase_attacks=2
            [/effect]
        [/object]
    )}
#enddef

#define TOT_ITEM_HUMAN_SHORTSWORD X Y ID
    {PICKUPPABLE_ITEM {ID} {X} {Y} (
        [has_attack]
            name={TOT_ITEM_TYPE_SWORD}
        [/has_attack]
        {TOT_ITEM_TYPE_SWORD_CHECK}
        {TOT_ITEM_STANDARD_EXCLUDE}
    ) items/human-shortsword.png
    _"$unit.name finds a fine Handcrafted Shortsword. Equip it?"
    _"Equip it"
    _"Leave it"
    _"$unit.name cannot use this item." (
        [object]
            name= _ "Handcrafted Shortsword"
            image=attacks/sword-human.png
            duration=forever
            description= _ "$unit.name equips the Handcrafted Shortsword."
            [effect]
                apply_to=attack
                name={TOT_ITEM_TYPE_SWORD}
                set_description= _ "handcrafted shortsword"
                set_icon=attacks/sword-human.png
                set_type=blade
                increase_damage=-25%
                increase_attacks=4
            [/effect]
        [/object]
    )}
#enddef

#define TOT_ITEM_HUMAN_LONGSWORD X Y ID
    {PICKUPPABLE_ITEM {ID} {X} {Y} (
        [has_attack]
            name={TOT_ITEM_TYPE_SWORD}
        [/has_attack]
        {TOT_ITEM_TYPE_SWORD_CHECK}
        {TOT_ITEM_STANDARD_EXCLUDE}
    ) items/human-longsword.png
    _"$unit.name finds a fine Handcrafted longsword. Equip it?"
    _"Equip it"
    _"Leave it"
    _"$unit.name cannot use this item." (
        [object]
            name= _ "Handcrafted longsword"
            image=attacks/sword-human.png
            duration=forever
            description= _ "$unit.name equips the Handcrafted longsword."
            [effect]
                apply_to=attack
                name={TOT_ITEM_TYPE_SWORD}
                set_description= _ "handcrafted longsword"
                set_icon=attacks/sword-human.png
                set_type=blade
                increase_damage=66%
                increase_attacks=-33%
            [/effect]
        [/object]
    )}
#enddef

#define TOT_ITEM_STAFF_BLUE X Y ID
    {PICKUPPABLE_ITEM {ID} {X} {Y} (
        [has_attack]
            name={TOT_ITEM_TYPE_STAFF}
        [/has_attack]
        {TOT_ITEM_TYPE_STAFF_CHECK}
        {TOT_ITEM_STANDARD_EXCLUDE}
    ) items/staff-blue.png
    _"$unit.name finds a Blue Staff brimming with magical powers. Equip it?"
    _"Equip it"
    _"Leave it"
    _"$unit.name cannot use this item." (
        [object]
            name= _ "Blue Staff"
            image=attacks/staff-elven.png
            duration=forever
            description= _ "$unit.name equips the Blue Staff."
            [effect]
                apply_to=attack
                name={TOT_ITEM_TYPE_STAFF}
                set_description= _ "blue staff"
                set_icon=attacks/staff-elven.png
                [specials]
                    mode=append
                    {WEAPON_SPECIAL_MAGICAL}
                [/specials]
                increase_damage=55%
            [/effect]
            [effect]
                apply_to=attack
                type=fire,cold,arcane
                increase_damage=25%
                increase_attacks=1
            [/effect]
        [/object]
    )}
#enddef

#define TOT_ITEM_STAFF_INFERNAL X Y ID
    {PICKUPPABLE_ITEM {ID} {X} {Y} (
        [has_attack]
            name={TOT_ITEM_TYPE_STAFF}
        [/has_attack]
        {TOT_ITEM_TYPE_STAFF_CHECK}
        {TOT_ITEM_STANDARD_EXCLUDE}
    ) items/staff-red.png
    _"$unit.name finds an Infernal Battlestaff brimming with fiery powers. Equip it?"
    _"Equip it"
    _"Leave it"
    _"$unit.name cannot use this item." (
        [object]
            name= _ "Infernal Battlestaff"
            image=attacks/staff-magic3.png
            duration=forever
            description= _ "$unit.name equips the Infernal Battlestaff."
            [effect]
                apply_to=attack
                name={TOT_ITEM_TYPE_STAFF}
                set_description= _ "infernal battlestaff"
                set_icon=attacks/staff-magic3.png
                [specials]
                    mode=append
                    {WEAPON_SPECIAL_MAGICAL}
                [/specials]
                increase_damage=70%
                increase_attacks=-100%
                increase_attacks=1
                set_type=fire
            [/effect]
            [effect]
                apply_to=attack
                type=fire
                increase_damage=70%
                increase_attacks=-2
                [specials]
                    mode=append
                    {TOT_SPECIALS_OVERWHELMING}
                [/specials]
            [/effect]
        [/object]
    )}
#enddef

#define TOT_ITEM_HAMMER_LIGHTNING X Y ID
    {PICKUPPABLE_ITEM {ID} {X} {Y} (
        [has_attack]
            name={TOT_ITEM_TYPE_HAMMER}
        [/has_attack]
        [not]
            [has_attack]
                formula="contains_string(description, 'Lightning Hammer' )"
            [/has_attack]
        [/not]
        {TOT_ITEM_STANDARD_EXCLUDE}
    ) items/hammer-runic-lightning.png
    _"$unit.name finds a Lightning Hammer. Equip it?"
    _"Equip it"
    _"Leave it"
    _"$unit.name cannot use this item." (
        [object]
            name= _ "Lightning Hammer"
            image=attacks/hammer-runic2.png
            duration=forever
            description= _ "$unit.name equips the Lightning Hammer."
            [effect]
                apply_to=attack
                name={TOT_ITEM_TYPE_HAMMER}
                set_description= _ "Lightning Hammer"
                set_icon=attacks/hammer-runic2.png
                set_type=impact
                [specials]
                    mode=append
                    {WEAPON_SPECIAL_MAGICAL}
                [/specials]
                increase_damage=7
                increase_attacks=1
            [/effect]

            [effect]
                apply_to=new_attack
                name="lightning"
                description= _ "lightning"
                icon=attacks/lightning.png
                type=arcane
                range=ranged
                [specials]
                    {WEAPON_SPECIAL_MAGICAL}
                [/specials]
                damage=24
                number=2
            [/effect]
            {LIGHTNING_ANIMATION "lightning" 1}
            {LIGHTNING_ANIMATION "lightning" 2}
            {LIGHTNING_ANIMATION "lightning" 3}
        [/object]
    )}
#enddef

    #####################
  ##    Jewellery    ##
#####################

#define TOT_ITEM_AMULET_OF_STRENGTH X Y ID
    {PICKUPPABLE_ITEM {ID} {X} {Y} (
        {TOT_ITEM_STANDARD_EXCLUDE}
    ) items/amulet_strength.png
    _"$unit.name finds an Amulet of Strength (increases damage with melee attacks), wear it?"
    _"Wear it"
    _"Leave it"
    _"$unit.name cannot use this item." (
        [object]
            name= _ "Amulet of Strength"
            image=items/amulet_strength.png
            duration=forever
            description= _ "$unit.name feels stronger in melee combat!"
            [effect]
                apply_to=attack
                range=melee
                increase_damage=9
            [/effect]
        [/object]
    )}
#enddef

#define TOT_ITEM_AMULET_OF_BALANCE X Y ID
    {PICKUPPABLE_ITEM {ID} {X} {Y} (
        {TOT_ITEM_STANDARD_EXCLUDE}
    ) items/amulet_balance.png
    _"$unit.name finds an Amulet of Balance (increases damage with all attacks), wear it?"
    _"Wear it"
    _"Leave it"
    _"$unit.name cannot use this item." (
        [object]
            name= _ "Amulet of Balance"
            image=items/amulet_balance.png
            duration=forever
            description= _ "$unit.name feels slightly stronger with all attacks!"
            [effect]
                apply_to=attack
                range=melee
                increase_damage=5
            [/effect]
            [effect]
                apply_to=attack
                range=ranged
                increase_damage=5
            [/effect]
        [/object]
    )}
#enddef

#define TOT_ITEM_AMULET_OF_HASTE X Y ID
    {PICKUPPABLE_ITEM {ID} {X} {Y} (
        {TOT_ITEM_STANDARD_EXCLUDE}
    ) items/amulet_haste.png
    _"$unit.name finds an Amulet of Haste (increases melee attack speed), wear it?"
    _"Wear it"
    _"Leave it"
    _"$unit.name cannot use this item." (
        [object]
            name= _ "Amulet of Haste"
            image=items/amulet_haste.png
            duration=forever
            description= _ "$unit.name feels faster in melee combat!"
            [effect]
                apply_to=attack
                range=melee
                increase_attacks=2
                increase_damage=-1
            [/effect]
        [/object]
    )}
#enddef

#define TOT_ITEM_AMULET_OF_MAGIC X Y ID
    {PICKUPPABLE_ITEM {ID} {X} {Y} (
        {TOT_ITEM_STANDARD_EXCLUDE}
    ) items/amulet_magic.png
    _"$unit.name finds an Amulet of Magic (increases fire, cold and arcane power), wear it?"
    _"Wear it"
    _"Leave it"
    _"$unit.name cannot use this item." (
        [object]
            name= _ "Amulet of Magic"
            image=items/amulet_magic.png
            duration=forever
            description= _ "$unit.name feels faster and stronger with magic!"
            [effect]
                apply_to=attack
                type=fire,cold,arcane
                increase_damage=5
                increase_attacks=1
            [/effect]
        [/object]
    )}
#enddef

#define TOT_ITEM_AMULET_OF_DEFENCE X Y ID
    {PICKUPPABLE_ITEM {ID} {X} {Y} (
        {TOT_ITEM_STANDARD_EXCLUDE}
    ) items/amulet_defence.png
    _"$unit.name finds an Amulet of Defence (increases physical resistances), wear it?"
    _"Wear it"
    _"Leave it"
    _"$unit.name cannot use this item." (
        [object]
            name= _ "Amulet of Defence"
            image=items/amulet_defence.png
            duration=forever
            description= _ "$unit.name feels stronger at defending against physical attacks!"
            [effect]
                apply_to=resistance
                replace=no
                [resistance]
                    blade=-8
                    impact=-8
                    pierce=-8
                [/resistance]
            [/effect]
        [/object]
    )}
#enddef

#define TOT_ITEM_AMULET_OF_ARCANE_FORTITUDE X Y ID
    {PICKUPPABLE_ITEM {ID} {X} {Y} (
        {TOT_ITEM_STANDARD_EXCLUDE}
    ) items/amulet_fortitude.png
    _"$unit.name finds an Amulet of Arcane Fortitude (increases magical resistances), wear it?"
    _"Wear it"
    _"Leave it"
    _"$unit.name cannot use this item." (
        [object]
            name= _ "Amulet of Arcane Fortitude"
            image=items/amulet_fortitude.png
            duration=forever
            description= _ "$unit.name feels stronger at defending against magical attacks!"
            [effect]
                apply_to=resistance
                replace=no
                [resistance]
                    fire=-8
                    cold=-8
                    arcane=-8
                [/resistance]
            [/effect]
        [/object]
    )}
#enddef

#define TOT_ITEM_RING_OF_REGENERATION_LESSER X Y ID
    {PICKUPPABLE_ITEM {ID} {X} {Y} (
        {TOT_ITEM_STANDARD_EXCLUDE}
    ) items/ring-regen_lesser.png
    _"$unit.name finds a Ring of lesser regeneration, wear it?"
    _"Wear it"
    _"Leave it"
    _"$unit.name cannot use this item." (
        [object]
            name= _ "Ring of Lesser Regeneration"
            image=items/ring-regen_lesser.png
            duration=forever
            description= _ "$unit.name now slowely regenerates!"
            [effect]
                apply_to=new_ability
                [abilities]
                    {TOT_ABILITIES_REGENERATION_LESSER}
                [/abilities]
            [/effect]
        [/object]
    )}
#enddef

#define TOT_ITEM_RING_OF_REGENERATION X Y ID
    {PICKUPPABLE_ITEM {ID} {X} {Y} (
        {TOT_ITEM_STANDARD_EXCLUDE}
    ) items/ring-regen_major.png
    _"$unit.name finds a Ring of regeneration, wear it?"
    _"Wear it"
    _"Leave it"
    _"$unit.name cannot use this item." (
        [object]
            name= _ "Ring of Regeneration"
            image=items/ring-regen_major.png
            duration=forever
            description= _ "$unit.name now regenerates!"
            [effect]
                apply_to=new_ability
                [abilities]
                    {ABILITY_REGENERATES}
                [/abilities]
            [/effect]
        [/object]
    )}
#enddef

    #####################
  ## Potions / Books ##
#####################

#define TOT_ITEM_POTION_DARKNESS X Y ID
    {PICKUPPABLE_ITEM {ID} {X} {Y} (
        {TOT_ITEM_STANDARD_EXCLUDE}
    ) items/potion-of-darkness.png
    _"$unit.name finds a Potion of Darkness (Sets alignment to chaotic and learns dark aura), drink it?"
    _"Drink it"
    _"Leave it"
    _"$unit.name cannot use this item." (
        [object]
            name= _ "Potion of Darkness"
            image=items/potion-of-darkness.png
            duration=forever
            description= _ "$unit.name is now chaotic and darkens surrounding units!"
            [effect]
                apply_to=new_ability
                [abilities]
                    {TOT_ABILITIES_DARK_AURA}
                [/abilities]
            [/effect]
            [effect]
                apply_to=remove_ability
                [abilities]
                    {ABILITY_ILLUMINATES}
                [/abilities]
            [/effect]
            [effect]
                apply_to=halo
                halo=halo/darkens-aura.png
            [/effect]
            [effect]
                apply_to=alignment
                set=chaotic
            [/effect]
        [/object]
    )}
#enddef

#define TOT_ITEM_POTION_ILLUMINATING X Y ID
    {PICKUPPABLE_ITEM {ID} {X} {Y} (
        {TOT_ITEM_STANDARD_EXCLUDE}
    ) items/potion-illuminating.png
    _"$unit.name finds a Potion of Illumination (Sets alignment to lawful and learns illuminates), drink it?"
    _"Drink it"
    _"Leave it"
    _"$unit.name cannot use this item." (
        [object]
            name= _ "Potion of Illumination"
            image=items/potion-illuminating.png
            duration=forever
            description= _ "$unit.name is now lawful and illuminates surrounding units!"
            [effect]
                apply_to=new_ability
                [abilities]
                    {ABILITY_ILLUMINATES}
                [/abilities]
            [/effect]
            [effect]
                apply_to=remove_ability
                [abilities]
                    {TOT_ABILITIES_DARK_AURA}
                [/abilities]
            [/effect]
            [effect]
                apply_to=halo
                halo=halo/illuminates-aura.png
            [/effect]
            [effect]
                apply_to=alignment
                set=lawful
            [/effect]
        [/object]
    )}
#enddef

#define TOT_ITEM_POTION_FOUL_LIQUID X Y ID
    {PICKUPPABLE_ITEM {ID} {X} {Y} (
        {TOT_ITEM_STANDARD_EXCLUDE}
    ) items/potion-foul-liquid.png
    _"$unit.name finds a Potion of Foul Liquid (Take heavy damage but increase power), drink it?"
    _"Drink it"
    _"Leave it"
    _"$unit.name cannot use this item." (
        [object]
            name= _ "Potion of Foul Liquid"
            image=items/potion-foul-liquid.png
            duration=forever
            description= _ "$unit.name feels a heavy surge through their body, as they collapse for a moment.."
            [effect]
                apply_to=hitpoints
                increase=-99%
            [/effect]
            [effect]
                apply_to=attack
                range=melee
                increase_attacks=2
                increase_damage=1
            [/effect]
            [effect]
                apply_to=attack
                range=ranged
                increase_attacks=2
                increase_damage=1
            [/effect]
        [/object]
    )}
#enddef

#define TOT_ITEM_POTION_VITALITY X Y ID
    {PICKUPPABLE_ITEM {ID} {X} {Y} (
        {TOT_ITEM_STANDARD_EXCLUDE}
    ) items/potion-red.png
    _"$unit.name finds a Potion of Vitality (heal to full and increase maximum HP), drink it?"
    _"Drink it"
    _"Leave it"
    _"$unit.name cannot use this item." (
        [object]
            name= _ "Potion of Vitality"
            image=items/potion-red.png
            duration=forever
            description= _ "$unit.name feels much better!"
            [effect]
                apply_to=hitpoints
                increase_total=10
                heal_full=yes
            [/effect]
        [/object]
    )}
#enddef

#define TOT_ITEM_POTION_LONG_WINTER X Y ID
    {PICKUPPABLE_ITEM {ID} {X} {Y} (
        {TOT_ITEM_STANDARD_EXCLUDE}
    ) items/potion-of-the-long-winter.png
    _"$unit.name finds a Potion of the Long Winter (turn your ranged or melee attack(s) into cold), drink it?"
    _"Drink it"
    _"Leave it"
    _"$unit.name cannot use this item." (
    [message]
        message= _ "What attack(s) would you like to make cold?"
        speaker=narrator
        [option]
            message= _ "Make my melee attacks cold"
            [command]
                [object]
                    name= _ "Potion of the Long Winter"
                    image=items/potion-of-the-long-winter.png
                    duration=forever
                    description= _ "$unit.name feels a cold rush with a temporary brain freeze.."
                    [effect]
                        apply_to=hitpoints
                        increase=-10
                    [/effect]
                    [effect]
                        apply_to=attack
                        range=melee
                        set_type=cold
                        increase_damage=1
                    [/effect]
                [/object]
            [/command]
        [/option]
        [option]
            message= _ "Make my ranged attacks cold"
            [command]
                [object]
                    name= _ "Potion of the Long Winter"
                    image=items/potion-of-the-long-winter.png
                    duration=forever
                    description= _ "$unit.name feels a cold rush with a temporary brain freeze.."
                    [effect]
                        apply_to=hitpoints
                        increase=-10
                    [/effect]
                    [effect]
                        apply_to=attack
                        range=ranged
                        set_type=cold
                        increase_damage=1
                    [/effect]
                [/object]
            [/command]
        [/option]
        [option]
            message= _ "Quickly spit out the liquid (discard and lose the item)"
        [/option]
    [/message]
    )}
#enddef

#define TOT_ITEM_BOOK_ARCANE X Y ID
    {PICKUPPABLE_ITEM {ID} {X} {Y} (
        {TOT_ITEM_STANDARD_EXCLUDE}
    ) items/enchanted-book-cyan.png
    _"$unit.name finds a Book of Arcane Knowledge (Increases arcane damage). Read it?"
    _"Read it"
    _"Leave it"
    _"$unit.name cannot use this item." (
        [object]
            name= _ "Book of Arcane Knowledge"
            image=items/enchanted-book-cyan.png
            duration=forever
            description= _ "$unit.name carefully reads the book as it disappears with a flash of light.."
            [effect]
                apply_to=attack
                type=arcane
                increase_damage=9
            [/effect]
        [/object]
    )}
#enddef

#define TOT_ITEM_BOOK_COLD X Y ID
    {PICKUPPABLE_ITEM {ID} {X} {Y} (
        {TOT_ITEM_STANDARD_EXCLUDE}
    ) items/enchanted-book-purple.png
    _"$unit.name finds a Book of Hungering Darkness (Increases cold damage). Read it?"
    _"Read it"
    _"Leave it"
    _"$unit.name cannot use this item." (
        [object]
            name= _ "Book of Hungering Darkness"
            image=items/enchanted-book-purple.png
            duration=forever
            description= _ "$unit.name carefully reads the book as it falls into the void.."
            [effect]
                apply_to=attack
                type=cold
                increase_damage=9
            [/effect]
        [/object]
    )}
#enddef

#define TOT_ITEM_BOOK_FIRE X Y ID
    {PICKUPPABLE_ITEM {ID} {X} {Y} (
        {TOT_ITEM_STANDARD_EXCLUDE}
    ) items/enchanted-book-red.png
    _"$unit.name finds a Book of Fire and Flame (Increases fire damage). Read it?"
    _"Read it"
    _"Leave it"
    _"$unit.name cannot use this item." (
        [object]
            name= _ "Book of Fire and Flame"
            image=items/enchanted-book-red.png
            duration=forever
            description= _ "$unit.name carefully reads the book as it combusts and turns into ashes.."
            [effect]
                apply_to=attack
                type=fire
                increase_damage=9
            [/effect]
        [/object]
    )}
#enddef

    #####################
  ##       Misc      ##
#####################

#define TOT_ITEM_GOLD X Y AMOUNT
    [item]
        x,y={X},{Y}
        image=items/gold-coins-small.png
    [/item]

    [event]
        name=moveto
        [filter]
            x,y={X},{Y}
            side=1,2
        [/filter]
        {TOT_GOLD {AMOUNT} ("You gain " + {AMOUNT} + _ " gold each.")}
        [remove_item]
            x,y={X},{Y}
        [/remove_item]
    [/event]
#enddef

#define TOT_ITEM_GOLD_CHEST X Y AMOUNT
    [item]
        x,y={X},{Y}
        image=items/chest.png
    [/item]

    [event]
        name=moveto
        [filter]
            x,y={X},{Y}
            side=1,2
        [/filter]
        {TOT_GOLD {AMOUNT} ("You gain " + {AMOUNT} + _ " gold each.")}
        [remove_item]
            x,y={X},{Y}
        [/remove_item]
        [item]
            x,y={X},{Y}
            image=items/chest-open.png
        [/item]
    [/event]
#enddef